[env:black_f407zg]
platform = ststm32
board = black_f407zg
framework = stm32cube

; 调试器配置(ST-Link V2)
upload_protocol = stlink
debug_tool = stlink

; 如果ST-Link有问题,可以使用串口上传(需要BOOT0接3.3V)
; upload_protocol = serial
; upload_port = COM3

; 如果需要使用USB DFU上传
; upload_protocol = dfu

; 串口监视器配置
monitor_speed = 9600
monitor_port = COM8  ; Windows下改成你的串口号
; monitor_port = /dev/ttyUSB0  ; Linux下改成你的串口号
monitor_dtr = 0  ; 禁用DTR信号，防止自动复位
monitor_rts = 0  ; 禁用RTS信号

; 编译选项
build_flags =
    -D USE_HAL_DRIVER
    -D STM32F407xx
    -D HSE_VALUE=8000000  ; 必须配置！覆盖PlatformIO默认的25MHz
    -Wl,-u,_printf_float  ; 支持printf浮点数

; 调试配置
debug_init_break = tbreak main
debug_load_mode = always

; 库依赖（如果需要）
lib_deps =
    ; Adafruit Unified Sensor
    ; DHT sensor library
